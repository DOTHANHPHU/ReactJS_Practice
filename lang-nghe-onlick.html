<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lắng nghe onClick</title>
    <script crossorigin src="https://unpkg.com/react@17.0.0/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@17.0.0/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>
</head>

<body>
    <div id="root"></div>

    <script type="text/babel">
        // Cách viết tối ưu hơn
        // Viết hàm xử lí lắng nghe đúng nhất
        const courses = [
            {
                "id": 15,
                "title": "HTML CSS Pro",
                "slug": "htmlcss",
                "description": "T\u1EEB c\u01A1 b\u1EA3n t\u1EDBi chuy\u00EAn s\u00E2u, th\u1EF1c h\u00E0nh 8 d\u1EF1 \u00E1n, h\u00E0ng tr\u0103m b\u00E0i t\u1EADp, trang h\u1ECFi \u0111\u00E1p ri\u00EAng, c\u1EA5p ch\u1EE9ng ch\u1EC9 sau kh\u00F3a h\u1ECDc v\u00E0 mua m\u1ED9t l\u1EA7n h\u1ECDc m\u00E3i m\u00E3i.",
                "image": "courses/15/62f13d2424a47.png",
                "icon": "courses/15/62385d6c63dfa.png",
                "video_type": "upload",
                "video": null,
                "old_price": 2500000,
                "price": 1299000,
                "pre_order_price": 699000,
                "students_count": 3837,
                "is_pro": true,
                "is_coming_soon": false,
                "is_selling": true,
                "published_at": "2022-08-18T17:00:00.000000Z",
                "is_registered": false,
                "user_progress": 0,
                "last_completed_at": null,
                "image_url": "https://files.fullstack.edu.vn/f8-prod/courses/15/62f13d2424a47.png",
                "icon_url": "https://files.fullstack.edu.vn/f8-prod/courses/15/62385d6c63dfa.png",
                "video_url": "",
                "landing_page_url": "/landing/htmlcss",
                "is_pre_order": false,
                "is_published": true
            },
            {
                "id": 27,
                "title": "Ng\u00F4n ng\u1EEF ti\u1EC1n x\u1EED l\u00FD Sass",
                "slug": "sass",
                "description": "\u0110\u00E2y l\u00E0 m\u1ED9t kh\u00F3a h\u1ECDc nh\u1ECF \u0111\u01B0\u1EE3c t\u00E1ch ra t\u1EEB 2 ch\u01B0\u01A1ng h\u1ECDc trong kh\u00F3a HTML CSS Pro. Ki\u1EBFn th\u1EE9c v\u1EC1 Sass trong kh\u00F3a n\u00E0y b\u1EA1n c\u00F3 th\u1EC3 \u00E1p d\u1EE5ng ngay v\u00E0o c\u00E1c d\u1EF1 \u00E1n c\u1EE7a b\u1EA1n.",
                "image": "courses/27/64e184ee5d7a2.png",
                "icon": "courses/27/64e0daf212fad.png",
                "video_type": "upload",
                "video": "courses/27/oeT5zTmdk8KlHwU2meMJpnR7uihkX6OvYxnkjiB9.mp4",
                "old_price": 400000,
                "price": 299000,
                "pre_order_price": 0,
                "students_count": 0,
                "is_pro": true,
                "is_coming_soon": false,
                "is_selling": true,
                "published_at": "2023-08-19T15:06:00.000000Z",
                "is_registered": false,
                "user_progress": 0,
                "last_completed_at": null,
                "image_url": "https://files.fullstack.edu.vn/f8-prod/courses/27/64e184ee5d7a2.png",
                "icon_url": "https://files.fullstack.edu.vn/f8-prod/courses/27/64e0daf212fad.png",
                "video_url": "https://videos.fullstack.edu.vn/f8-prod/courses/27/oeT5zTmdk8KlHwU2meMJpnR7uihkX6OvYxnkjiB9.mp4",
                "landing_page_url": "/landing/sass",
                "is_pre_order": false,
                "is_published": true
            },
            {
                "id": 19,
                "title": "JavaScript Pro",
                "slug": "javascript-pro",
                "description": "Kh\u00F3a h\u1ECDc JavaScript Pro",
                "image": "courses/19/62f13cb607b4b.png",
                "icon": "courses/19/62f13cb685c81.png",
                "video_type": "upload",
                "video": null,
                "old_price": 0,
                "price": 0,
                "pre_order_price": 0,
                "students_count": 0,
                "is_pro": true,
                "is_coming_soon": true,
                "is_selling": false,
                "published_at": "2023-11-30T17:00:00.000000Z",
                "is_registered": false,
                "user_progress": 0,
                "last_completed_at": null,
                "image_url": "https://files.fullstack.edu.vn/f8-prod/courses/19/62f13cb607b4b.png",
                "icon_url": "https://files.fullstack.edu.vn/f8-prod/courses/19/62f13cb685c81.png",
                "video_url": "",
                "landing_page_url": "/landing/javascript-pro",
                "is_pre_order": false,
                "is_published": false
            },
            {
                "id": 20,
                "title": "NextJS Pro",
                "slug": "reactjs-pro",
                "description": "Kh\u00F3a h\u1ECDc NextJS Pro",
                "image": "courses/20/648020fc16597.png",
                "icon": "courses/20/648020fcc8000.png",
                "video_type": "upload",
                "video": null,
                "old_price": 0,
                "price": 0,
                "pre_order_price": 0,
                "students_count": 0,
                "is_pro": true,
                "is_coming_soon": true,
                "is_selling": false,
                "published_at": "2024-03-31T17:00:00.000000Z",
                "is_registered": false,
                "user_progress": 0,
                "last_completed_at": null,
                "image_url": "https://files.fullstack.edu.vn/f8-prod/courses/20/648020fc16597.png",
                "icon_url": "https://files.fullstack.edu.vn/f8-prod/courses/20/648020fcc8000.png",
                "video_url": "",
                "landing_page_url": "/landing/reactjs-pro",
                "is_pre_order": false,
                "is_published": false
            }
        ]

        // CourseItem.js
        /* 
            - Nếu truyền thẳng object vào thì dùng destructuring
            - Lúc này các thằng sau course. thì truyền đúng dữ liệu từ data
                vd: props: course.studentCount
                    destructuring: course.student_count

        ** Quy trình hoạt động của onClick
            - Truyền onclick làm tham số cho CourseItem
            - Lúc này khi click vào h2 nó sẽ gọi tới {() => onClick(course)}
                -> gọi ra onclick ở CourseItem({course, onClick})
                -> nó quay ngược ra onClick = {handleClick}
                -> rồi nó gọi tới handleClick 
                -> đi tới Arrow func handleClick

        ** Quy trình gọi tới {course}
            - Khi truyền dữ liệu từ {course} vào component CourseItem. Tức là course={course}
                -> onClick ở trong nhận được cái course đó, tức là {() => onClick(course)}
                -> course ở CourseItem({course, onClick}) = course ở onClick(course)} = {course}
                ** {course} là dữ liệu trả ra từ map
                -> truyền course vào const handleClick, tức là const handleClick = (course)
                -> sau đó course ở const handleClick = (course) được gọi tới và thực thi
        */
        // UI components: Thường k xử lí lắng nghe ở đây
        function CourseItem({course, onClick}) {
            return (
                <div>
                    <img src={course.image_url} />
                    <h2 
                        onClick={() => onClick(course)}
                    >
                        {course.title}
                    </h2>
                    <p>{course.description}</p>
                    <p>Số học sinh tham gia: {course.student_count}</p>
                </div>

            )
        }
        /* 
            ** course={course}: Này là khi truyền thẳng object vào
                - course đầu là tên của props
                - {course} này là dữ liệu trả ra từ map
            ** Nếu truyền thẳng object nhớ viết component dưới dạng destructuring
        */

        // App.js
        // Container: Xử lí lắng nghe ở đây
        function App() {

            // Tạo Arrow Func xử lí lắng nghe
            // useCallback
            const handleClick = (course) => {
                alert(course.title)
            }

            return (
                <div id="wrapper">
                    {
                        courses.map(course => (
                            <CourseItem
                                key={course.id}
                                course={course} // các này tôi ưu hơn: truyền thẳng object vào
                                onClick = {handleClick}
                            />
                        ))
                    }
                </div>
            )
        }

        // index.js
        ReactDOM.render(<App />, document.getElementById('root'))
    </script>
</body>

</html>